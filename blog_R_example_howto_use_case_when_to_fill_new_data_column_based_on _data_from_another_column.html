<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
   <title></title>
   <link rel="stylesheet" type="text/css" href="style.css">
   <script src="https://kit.fontawesome.com/9ceb65734c.js" crossorigin="anonymous"></script> <!-- Font Awesome stuff for hamburger icon -->
  </head>

  <script src = "myJavaScripts.js"></script>

  <body>

    <header class="header">
      <div class = "top">
        <p> Amanda R. Hart </p> 
      </div>
      <div class = "topnav-right" id="myTopnav">
        <a class = "active" href = "index.html"> Home </a>
        <a href = "about.html"> About </a> 
        <a href = "research.html"> Research </a>
        <a href = "publications.html"> Publications </a>
        <a href = "blog.html"> Blog </a>
        <a href = "contact.html"> Contact </a>
        <a href = "javascript:void(0);" class="icon" onclick="myFunction()">
          <i class="fas fa-bars"></i>
        </a>
      </div>
    </header>

    <hr class="headerline">

    <div id="containerblog"> 
     <div id="main">
        <!-- Page title -->
        <h1 class="extraspaceblog"> How To: use <span class="f">case_when</span> to fill a new data column based on data from another column </h1> 
        <h5 style="color:grey;"> -- Published on 20 Mar 2020 -- </h5>

        <!-- Blog navigation menu -->
        <div class = "blognav">
        <p>Categories:</p>
        <hr class="division">
          <a href = "blog_graphics.html"> Graphics in R </a>
          <hr class="division">
          <a href = "blog_R_examples.html"> R </a>
          <hr class="division">
        </div>

        <!-- Beginning here is the content section -->
        <hr class="division">

        <hr class="whitespace">
        <p> I used the tidyverse package and its <span class="f">case_when()</span> function to create a new column filled with data based on the information in an existing data column.</p>
        <hr class="whitespace">
        <p> To demonstrate, load a TidyTuesday dataset from 3/31/20:</p>
        <hr class="smallwhitespace">


        <code class="Rcode">
            <p>
                <span style="color:red;">library</span>(tidyverse) <br>
                brewer_size <- readr::read_csv(<q>https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-03-31/brewer_size.csv</q>)
        </code>

        <hr class="smallwhitespace">
        <p>For plotting purposes, I wanted to ensure that the brewer_size information would be listed in plots from smallest production (zero barrels of beer) to largest production (total production). To do this I created a new column that would default to the desired order when plotted and filled it using the <span class="f">case_when()</span> function.</p>
        <hr class="smallwhitespace">

        <code class="Rcode">
            <p>
                updated_brewer_size <- brewer_size %>% mutate(brewer_size_ordered = case_when(brewer_size == <q>Zero Barrels</q> ~  <q>A</q>, <br>
                brewer_size == <q>Under 1 Barrel</q> ~ <q>B</q>,<br> 
                brewer_size == <q>1 to 1,000 Barrels</q> ~ <q>C</q>, <br>
                brewer_size == <q>1,001 to 7,500 Barrels</q> ~ <q>D</q>,<br> 
                brewer_size == <q>7,501 to 15,000 Barrels</q> ~ <q>E</q>,<br> 
                brewer_size == "<q>5,001 to 30,000 Barrels</q> ~ <q>F</q>,<br> 
                brewer_size == <q>30,001 to 60,000 Barrels</q> ~ <q>G</q>,<br> 
                brewer_size == <q>60,001 to 100,000 Barrels</q> ~ <q>H</q>, <br>
                brewer_size == <q>100,001 to 500,000 Barrels</q> ~ <q>I</q>, <br>
                brewer_size == <q>500,001 to 1,000,000 Barrels</q> ~ <q>J</q>,<br> 
                brewer_size == <q>1,000,001 to 6,000,000 Barrels</q> ~ <q>K</q>,<br>
                brewer_size == <q>6,000,001 Barrels and Over</q> ~ <q>L</q>,<br>
                brewer_size == <q>1,000,000 to 6,000,000 Barrels</q> ~ <q>M</q>,<br>
                brewer_size == <q>2,000,000 to 6,000,000 Barrels</q> ~ <q>N</q>,<br>
                brewer_size == <q>1,00,001 to 1,999,999 Barrels</q> ~ <q>O</q>,<br>
                brewer_size == <q>Total</q> ~ <q>P</q>))
            </p>
        </code>

        <hr class="smallwhitespace">
        <p><b>Note:</b> the information provided to the case_when() function must be 2-sided where on the left you have a statement that could be passed to which() and on the right of the ~ you have the value to replace it with in the new column.</p>
        <hr class="smallwhitespace">

        <code>
            <p>
                head(updated_brewer_size)
            </p>
        </code>
        
        <hr class="smallwhitespace">
        <p>
            ## # A tibble: 6 x 7<br>
##    year brewer_size n_of_brewers total_barrels taxable_removals total_shipped<br>
##   <dbl> <chr>              <dbl>         <dbl>            <dbl>         <dbl>
## 1  2009 6,000,001 …           18    171232882.       159643984.       3639970
## 2  2009 1,000,001 …            4      9970404.         9592723.         14548
## 3  2009 500,001 to…            7      4831386.         4535659.         21563
## 4  2009 100,001 to…           27      5422156.         4469289.        128000
## 5  2009 60,001 to …           19      1501977.         1224618.         95732
## 6  2009 30,001 to …           32      1412245.         1233959.         14369
## # … with 1 more variable: brewer_size_ordered <chr>

twitter logo GitHub logo GitHub logo Research gate logo
        </p>



<!-- IMAGE HERE !!!!!!!!!!!!!!!!!!!!!!-->

      </div>
    </div>

    <br>

    <footer id="footer">
     <!-- Footer section -->
      <div id="footer">
      <a href="https://twitter.com/ahartofthesea?"><img src="images/Twitter_Logo_WhiteOnImage.png" alt="twitter logo" width="50" height="50"></a>   <a href="https://github.com/ahart1?"><img src="images/GitHub-Mark-Light-120px-plus.png" alt="GitHub logo" width="35" height="35"></a>      <a href="https://scholar.google.com/citations?user=9Ea9PWwAAAAJ&hl=en&oi=sra"><img src="images/logo_googlescholar.png" alt="GitHub logo" width="35" height="35"></a>   <a href="https://www.researchgate.net/profile/Amanda_Hart4"><img src="images/logo_researchgate.png" alt="Research gate logo" width="40" height="40"></a>
      <p> Website authored by Amanda R. Hart </p>
      </div>
    </footer> 

  </body>
</html>